

# Evotor API Client

Этот набор скриптов позволяет получать различную информацию посредством API Эвотор. На данный момент есть возможность получить информацию о торговых точках и устройствах пользователя, а также получить весь перечень номенклатуры.

## Содержание
- [Evotor API Client](#evotor-api-client)
  - [Содержание](#содержание)
  - [Требования](#требования)
  - [Установка](#установка)
  - [Использование Devices N Stores](#использование-devices-n-stores)
  - [Функциональность Devices N Stores](#функциональность-devices-n-stores)
  - [Пример вывода Devices N Stores](#пример-вывода-devices-n-stores)
  - [Использование Get All Goods](#использование-get-all-goods)
  - [Функциональность Get All Goods](#функциональность-get-all-goods)
  - [Пример вывода Get All Goods в файле](#пример-вывода-get-all-goods-в-файле)
  - [Лицензия](#лицензия)


## Требования

* Python 3.9+
* aiohttp

## Установка

Рекомендуется использование виртуального окружения и установка зависимостей в него с помощью pip:
```bash
pip install -r requirements.txt
```
## Использование Devices N Stores

Скрипт можно запустить с помощью команды (предварительно активировав виртуальное окружение):
```bash
python devices_n_stores.py
```
Для windows можно использовать bat файл в комплекте (обратите внимание, bat файл ожидает, что виртуальное окружение создано внутри рабочей директории скрипта и с названием "venv")

При запуске, скрипт будет запрашивать токен приложения для API Evotor. После успешного ввода токена и нажатия Enter, на экран будет выведена информация о торгоых точках и устройствах пользователя в удобном виде

## Функциональность Devices N Stores

Скрипт позволяет получать следующие данные:

* Информация о магазинах
* Информация о устройствах

## Пример вывода Devices N Stores
```json
[
    {
        "id": "a1234567-89ab-cdef-0123-456789abcdef",
        "name": "Магазин 1",
        "devices": [
            {
                "id": "c2a1b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6",
                "name": "Устройство 1"
            }
        ]
    },
    {
        "id": "b9876543-210f-fedc-ba98-76543210fedc",
        "name": "Магазин 2",
        "devices": []
    }
]
```

## Использование Get All Goods

Скрипт запускается по аналогии с [Использование Devices N Stores](#использование-devices-n-stores) за исключением лишь названий самого скрипта или bat файла для быстрого запуска.

При запуске, скрипт будет запрашивать токен приложения для API Evotor и уникальный идентификатор торговой точки. После успешного ввода токена и идентификатора, а также нажатия Enter, на экран будет выведена информация об обработке операции, после чего в дирректории рядом появится отформатированный JSON со всеми товарами

## Функциональность Get All Goods

Скрипт позволяет получать следующие данные:

* Информация обо всех товарах пользователя, с учетом пагинации API v2

## Пример вывода Get All Goods в файле
```json
[
    {
        "type": "NORMAL",
        "name": "Товар 1",
        "code": "12345",
        "price": 100.0,
        "cost_price": 50.0,
        "quantity": 1,
        "measure_name": "шт",
        "tax": "NO_VAT",
        "allow_to_sell": true,
        "parent_id": "id родительской группы(папки)",
        "id": "id товара из облака Эвотор",
        "store_id": "store_id клиента",
        "user_id": "id пользователя в экосистеме Эвотор",
        "created_at": "2024-10-14T10:16:29.821+0000",
        "updated_at": "2024-10-14T10:16:29.822+0000",
        "barcodes": [
            "1234567"
        ]
    },
    {
        "type": "NORMAL",
        "name": "Товар 2",
        "code": "123456",
        "price": 620.0,
        "cost_price": 397.0,
        "quantity": 1,
        "measure_name": "шт",
        "tax": "NO_VAT",
        "allow_to_sell": true,
        "parent_id": "id родительской группы(папки)",
        "id": "id товара из облака Эвотор",
        "store_id": "store_id клиента",
        "user_id": "id пользователя в экосистеме Эвотор",
        "created_at": "2024-10-14T10:16:30.228+0000",
        "updated_at": "2024-10-14T10:16:30.370+0000",
        "barcodes": [
            "1234568"
        ]
    },
]
```

## Лицензия

Этот скрипт распространяется под лицензией MIT. Вы можете использовать, модифицировать и распространять его свободно.
